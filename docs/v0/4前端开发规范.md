# å‰ç«¯å¼€å‘è§„èŒƒ - Vue 3 é¡¹ç›®

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-10-27
- **é€‚ç”¨é¡¹ç›®**: çŸ¥è¯†æ˜Ÿçƒè®­ç»ƒè¥é€€æ¬¾ç³»ç»Ÿ v0
- **æŠ€æœ¯æ ˆ**: Vue 3.3+ / Vite 5.x / Element Plus 2.4+
- **å‚è€ƒæ ‡å‡†**: Vue å®˜æ–¹é£æ ¼æŒ‡å— + é˜¿é‡Œå·´å·´å‰ç«¯è§„çº¦

---

## ç›®å½•

- [ä¸€ã€ç¼–ç¨‹è§„çº¦](#ä¸€ç¼–ç¨‹è§„çº¦)
- [äºŒã€Vue 3 ç¼–ç è§„èŒƒ](#äºŒvue-3-ç¼–ç è§„èŒƒ)
- [ä¸‰ã€å‘½åè§„èŒƒ](#ä¸‰å‘½åè§„èŒƒ)
- [å››ã€æ³¨é‡Šè§„èŒƒ](#å››æ³¨é‡Šè§„èŒƒ)
- [äº”ã€ç»„ä»¶è§„èŒƒ](#äº”ç»„ä»¶è§„èŒƒ)
- [å…­ã€çŠ¶æ€ç®¡ç†è§„èŒƒ](#å…­çŠ¶æ€ç®¡ç†è§„èŒƒ)
- [ä¸ƒã€API è°ƒç”¨è§„èŒƒ](#ä¸ƒapi-è°ƒç”¨è§„èŒƒ)
- [å…«ã€æ ·å¼è§„èŒƒ](#å…«æ ·å¼è§„èŒƒ)
- [ä¹ã€æµ‹è¯•è§„èŒƒ](#ä¹æµ‹è¯•è§„èŒƒ)
- [åã€æ€§èƒ½ä¼˜åŒ–è§„èŒƒ](#åæ€§èƒ½ä¼˜åŒ–è§„èŒƒ)

---

## ä¸€ã€ç¼–ç¨‹è§„çº¦

### 1.1 æ ¸å¿ƒåŸåˆ™

#### âœ… æ–‡æ¡£å…ˆè¡ŒåŸåˆ™
- **ã€å¼ºåˆ¶ã€‘** å¼€å‘æ–°ç»„ä»¶å‰,å¿…é¡»å…ˆç¼–å†™ç»„ä»¶æ–‡æ¡£(Propsã€Eventsã€Slots)
- **ã€æ¨èã€‘** ä½¿ç”¨ JSDoc æˆ– TypeScript å£°æ˜ç»„ä»¶æ¥å£

**ç¤ºä¾‹**:
```vue
<script setup>
/**
 * ç»Ÿè®¡å¡ç‰‡ç»„ä»¶
 *
 * @component StatisticsCard
 * @description å±•ç¤ºè®­ç»ƒè¥é€€æ¬¾ç»Ÿè®¡æ•°æ®
 *
 * @props {number} totalCount - æ€»äººæ•°
 * @props {number} qualifiedCount - åˆæ ¼äººæ•°
 * @props {number} qualifiedRate - åˆæ ¼ç‡(ç™¾åˆ†æ¯”)
 *
 * @emits {void} refresh - ç‚¹å‡»åˆ·æ–°æŒ‰é’®æ—¶è§¦å‘
 *
 * @example
 * <StatisticsCard
 *   :total-count="99"
 *   :qualified-count="85"
 *   :qualified-rate="85.86"
 *   @refresh="handleRefresh"
 * />
 */
const props = defineProps({
  totalCount: { type: Number, required: true },
  qualifiedCount: { type: Number, required: true },
  qualifiedRate: { type: Number, required: true }
});

const emit = defineEmits(['refresh']);
</script>
```

---

#### âœ… ç»„ä»¶åŒ–å¼€å‘åŸåˆ™
- **ã€å¼ºåˆ¶ã€‘** å•ä¸ªç»„ä»¶æ–‡ä»¶ä¸è¶…è¿‡ 300 è¡Œä»£ç 
- **ã€æ¨èã€‘** å¤æ‚é¡µé¢æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶
- **ã€æ¨èã€‘** é€šç”¨ç»„ä»¶æå–åˆ° `components/` ç›®å½•

**ç¤ºä¾‹**:
```
// âŒ é”™è¯¯: å•ä¸ªæ–‡ä»¶600è¡Œ
RefundList.vue (600 lines)

// âœ… æ­£ç¡®: æ‹†åˆ†ä¸ºå¤šä¸ªç»„ä»¶
RefundList.vue (150 lines)
  â”œâ”€â”€ StatisticsCard.vue (50 lines)
  â”œâ”€â”€ QualifiedNamesList.vue (80 lines)
  â””â”€â”€ RefundTable.vue (120 lines)
```

---

#### âœ… æµ‹è¯•é©±åŠ¨å¼€å‘(TDD)åŸåˆ™
- **ã€æ¨èã€‘** æ ¸å¿ƒä¸šåŠ¡ç»„ä»¶å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
- **ã€æ¨èã€‘** ä½¿ç”¨ Vitest æˆ– Vue Test Utils è¿›è¡Œæµ‹è¯•

**ç¤ºä¾‹**:
```javascript
// StatisticsCard.test.js
import { mount } from '@vue/test-utils';
import StatisticsCard from '@/components/StatisticsCard.vue';

describe('StatisticsCard', () => {
  it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºç»Ÿè®¡æ•°æ®', () => {
    const wrapper = mount(StatisticsCard, {
      props: {
        totalCount: 99,
        qualifiedCount: 85,
        qualifiedRate: 85.86
      }
    });

    expect(wrapper.text()).toContain('99');
    expect(wrapper.text()).toContain('85');
    expect(wrapper.text()).toContain('85.86%');
  });

  it('ç‚¹å‡»åˆ·æ–°æŒ‰é’®åº”è¯¥è§¦å‘ refresh äº‹ä»¶', async () => {
    const wrapper = mount(StatisticsCard, {
      props: { totalCount: 99, qualifiedCount: 85, qualifiedRate: 85.86 }
    });

    await wrapper.find('.refresh-btn').trigger('click');
    expect(wrapper.emitted('refresh')).toBeTruthy();
  });
});
```

---

### 1.2 åŸºæœ¬ç¼–ç è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘ä½¿ç”¨ ESLint + Prettier
```json
// .eslintrc.cjs
module.exports = {
  extends: [
    'plugin:vue/vue3-recommended',
    'eslint:recommended',
    '@vue/prettier'
  ],
  rules: {
    'vue/multi-word-component-names': 'error',
    'vue/no-unused-vars': 'error',
    'vue/require-default-prop': 'warn',
    'prettier/prettier': 'error'
  }
};
```

---

## äºŒã€Vue 3 ç¼–ç è§„èŒƒ

### 2.1 Composition API è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘ä¼˜å…ˆä½¿ç”¨ Composition API
```vue
<script setup>
// âœ… æ¨è: ä½¿ç”¨ Composition API
import { ref, computed, onMounted } from 'vue';

const count = ref(0);
const doubleCount = computed(() => count.value * 2);

onMounted(() => {
  console.log('ç»„ä»¶å·²æŒ‚è½½');
});
</script>

<!-- âŒ ä¸æ¨è: Options API (é™¤éæœ‰ç‰¹æ®Šéœ€æ±‚) -->
<script>
export default {
  data() {
    return { count: 0 };
  },
  computed: {
    doubleCount() { return this.count * 2; }
  },
  mounted() {
    console.log('ç»„ä»¶å·²æŒ‚è½½');
  }
};
</script>
```

---

#### ã€å¼ºåˆ¶ã€‘é€»è¾‘å¤ç”¨ä½¿ç”¨ Composables
```javascript
// composables/useRefundList.js
import { ref } from 'vue';
import { getRefundList } from '@/api/camps.api';

/**
 * é€€æ¬¾åå•ç®¡ç† Composable
 *
 * @param {Ref<number>} checkinId - è®­ç»ƒè¥ID
 * @returns {Object} é€€æ¬¾åå•æ•°æ®å’Œæ–¹æ³•
 */
export function useRefundList(checkinId) {
  const refundList = ref([]);
  const statistics = ref({});
  const loading = ref(false);

  const fetchRefundList = async (requiredDays) => {
    loading.value = true;
    try {
      const data = await getRefundList(checkinId.value, requiredDays);
      refundList.value = data.refund_list;
      statistics.value = data.statistics;
    } finally {
      loading.value = false;
    }
  };

  return {
    refundList,
    statistics,
    loading,
    fetchRefundList
  };
}
```

**ä½¿ç”¨**:
```vue
<script setup>
import { useRefundList } from '@/composables/useRefundList';

const checkinId = ref(123);
const { refundList, statistics, loading, fetchRefundList } = useRefundList(checkinId);
</script>
```

---

### 2.2 å“åº”å¼æ•°æ®è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘ä½¿ç”¨ ref/reactive æ­£ç¡®å£°æ˜å“åº”å¼æ•°æ®
```javascript
// âœ… æ­£ç¡®: åŸºæœ¬ç±»å‹ä½¿ç”¨ ref
const count = ref(0);
const name = ref('å¼ ä¸‰');
const isLoading = ref(false);

// âœ… æ­£ç¡®: å¯¹è±¡ç±»å‹å¯ä½¿ç”¨ reactive
const formData = reactive({
  username: '',
  password: ''
});

// âŒ é”™è¯¯: åŸºæœ¬ç±»å‹ä¸èƒ½ç”¨ reactive
const count = reactive(0); // é”™è¯¯!
```

#### ã€æ¨èã€‘è§£æ„ reactive å¯¹è±¡ä½¿ç”¨ toRefs
```javascript
// âœ… æ­£ç¡®
import { toRefs } from 'vue';

const state = reactive({ count: 0, name: 'å¼ ä¸‰' });
const { count, name } = toRefs(state);

// âŒ é”™è¯¯: ç›´æ¥è§£æ„ä¼šä¸¢å¤±å“åº”æ€§
const { count, name } = state;
```

---

## ä¸‰ã€å‘½åè§„èŒƒ

### 3.1 æ–‡ä»¶å‘½å

#### ã€å¼ºåˆ¶ã€‘ç»„ä»¶æ–‡ä»¶ä½¿ç”¨å¤§é©¼å³°å‘½å(PascalCase)
```
// âœ… æ­£ç¡®
CampList.vue
RefundList.vue
StatisticsCard.vue
ConfigDialog.vue

// âŒ é”™è¯¯
campList.vue
refund-list.vue
statistics_card.vue
```

#### ã€æ¨èã€‘é¡µé¢æ–‡ä»¶æ”¾åœ¨ views/ ç›®å½•
```
views/
â”œâ”€â”€ CampList.vue        # é¡µé¢
â””â”€â”€ RefundList.vue      # é¡µé¢

components/
â”œâ”€â”€ StatisticsCard.vue  # é€šç”¨ç»„ä»¶
â””â”€â”€ ConfigDialog.vue    # é€šç”¨ç»„ä»¶
```

---

### 3.2 å˜é‡å‘½å

#### ã€å¼ºåˆ¶ã€‘å“åº”å¼å˜é‡ä½¿ç”¨å°é©¼å³°å‘½å
```javascript
// âœ… æ­£ç¡®
const userName = ref('');
const refundList = ref([]);
const isLoading = ref(false);

// âŒ é”™è¯¯
const user_name = ref('');
const RefundList = ref([]);
```

#### ã€æ¨èã€‘å¸¸é‡ä½¿ç”¨å…¨å¤§å†™+ä¸‹åˆ’çº¿
```javascript
// âœ… æ­£ç¡®
const MAX_PAGE_SIZE = 100;
const API_BASE_URL = '/api';
const DEFAULT_REQUIRED_DAYS = 7;

// âŒ é”™è¯¯
const maxPageSize = 100;
const apiBaseUrl = '/api';
```

---

### 3.3 ç»„ä»¶å‘½å

#### ã€å¼ºåˆ¶ã€‘ç»„ä»¶åå¿…é¡»å¤šä¸ªå•è¯
```vue
<!-- âœ… æ­£ç¡® -->
<template>
  <StatisticsCard />
  <RefundTable />
</template>

<!-- âŒ é”™è¯¯: å•ä¸ªå•è¯ -->
<template>
  <Card />
  <Table />
</template>
```

#### ã€æ¨èã€‘åŸºç¡€ç»„ä»¶ä½¿ç”¨ Base å‰ç¼€
```
components/
â”œâ”€â”€ BaseButton.vue
â”œâ”€â”€ BaseInput.vue
â””â”€â”€ BaseTable.vue
```

---

## å››ã€æ³¨é‡Šè§„èŒƒ

### 4.1 ç»„ä»¶æ³¨é‡Š

#### ã€å¼ºåˆ¶ã€‘ç»„ä»¶å¿…é¡»æœ‰æè¿°æ³¨é‡Š
```vue
<script setup>
/**
 * é€€æ¬¾åå•é¡µé¢
 *
 * @component RefundList
 * @description æ˜¾ç¤ºè®­ç»ƒè¥çš„é€€æ¬¾åå•,æ”¯æŒæ•°æ®æ€»è§ˆã€ä¸€é”®å¤åˆ¶ã€å¯¼å‡ºExcel/å›¾ç‰‡
 *
 * @route /refund/:checkin_id
 * @param {string} checkin_id - è®­ç»ƒè¥ID(è·¯ç”±å‚æ•°)
 * @query {string} title - è®­ç»ƒè¥åç§°
 * @query {number} total_days - æ€»å¤©æ•°
 *
 * @author å¼ ä¸‰
 * @date 2025-10-27
 */
</script>
```

---

### 4.2 å¤æ‚é€»è¾‘æ³¨é‡Š

#### ã€æ¨èã€‘å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
```javascript
const handleCalculate = async () => {
  // æ ¡éªŒ: å®Œæˆå¤©æ•°ä¸èƒ½è¶…è¿‡æ€»å¤©æ•°
  if (requiredDays.value > totalDays.value) {
    ElMessage.warning(`å®Œæˆå¤©æ•°ä¸èƒ½è¶…è¿‡è®­ç»ƒè¥æ€»å¤©æ•°(${totalDays.value}å¤©)`);
    return;
  }

  // æ“ä½œç¡®è®¤å¼¹çª—
  try {
    await ElMessageBox.confirm(
      `ç¡®å®šè¦æŒ‰ç…§ ${requiredDays.value} å¤©çš„æ ‡å‡†ç”Ÿæˆé€€æ¬¾åå•å—?`,
      'æ“ä½œç¡®è®¤',
      { type: 'warning' }
    );
  } catch {
    return; // ç”¨æˆ·å–æ¶ˆ
  }

  // è°ƒç”¨æ¥å£ç”Ÿæˆé€€æ¬¾åå•
  loading.value = true;
  try {
    const data = await getRefundList(checkinId, requiredDays.value);
    refundList.value = data.refund_list;
    statistics.value = data.statistics;
    ElMessage.success('è®¡ç®—å®Œæˆ!');
  } finally {
    loading.value = false;
  }
};
```

---

## äº”ã€ç»„ä»¶è§„èŒƒ

### 5.1 Props è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘Props å¿…é¡»å£°æ˜ç±»å‹å’Œé»˜è®¤å€¼
```vue
<script setup>
// âœ… æ­£ç¡®: å®Œæ•´çš„ Props å£°æ˜
const props = defineProps({
  totalCount: {
    type: Number,
    required: true,
    validator: (value) => value >= 0
  },
  title: {
    type: String,
    default: 'æœªå‘½åè®­ç»ƒè¥'
  },
  showActions: {
    type: Boolean,
    default: false
  }
});

// âŒ é”™è¯¯: ç¼ºå°‘ç±»å‹å£°æ˜
const props = defineProps({
  totalCount: Number, // ç¼ºå°‘ required/default
  title: String
});
</script>
```

---

### 5.2 Emits è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘Events å¿…é¡»æ˜¾å¼å£°æ˜
```vue
<script setup>
// âœ… æ­£ç¡®: å£°æ˜æ‰€æœ‰äº‹ä»¶
const emit = defineEmits(['refresh', 'delete', 'update']);

const handleRefresh = () => {
  emit('refresh');
};

// âŒ é”™è¯¯: æœªå£°æ˜äº‹ä»¶
const emit = defineEmits();
emit('unknownEvent'); // ä¸æ¨è
</script>
```

#### ã€æ¨èã€‘äº‹ä»¶åä½¿ç”¨çŸ­æ¨ªçº¿å‘½å
```vue
<template>
  <!-- âœ… æ­£ç¡® -->
  <button @click="emit('refresh-data')">åˆ·æ–°</button>
  <button @click="emit('update-status')">æ›´æ–°</button>

  <!-- âŒ é”™è¯¯ -->
  <button @click="emit('refreshData')">åˆ·æ–°</button>
  <button @click="emit('updateStatus')">æ›´æ–°</button>
</template>
```

---

### 5.3 ç»„ä»¶é€šä¿¡è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘çˆ¶å­ç»„ä»¶é€šä¿¡ä½¿ç”¨ Props + Emits
```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <StatisticsCard
    :total-count="statistics.total_count"
    :qualified-count="statistics.qualified_count"
    @refresh="handleRefresh"
  />
</template>

<!-- å­ç»„ä»¶ -->
<script setup>
const props = defineProps({
  totalCount: { type: Number, required: true },
  qualifiedCount: { type: Number, required: true }
});

const emit = defineEmits(['refresh']);
</script>
```

#### ã€æ¨èã€‘è·¨ç»„ä»¶é€šä¿¡ä½¿ç”¨ Pinia
```javascript
// stores/refund.store.js
import { defineStore } from 'pinia';

export const useRefundStore = defineStore('refund', () => {
  const refundList = ref([]);
  const statistics = ref({});

  const setRefundList = (data) => {
    refundList.value = data.refund_list;
    statistics.value = data.statistics;
  };

  return {
    refundList,
    statistics,
    setRefundList
  };
});
```

---

## å…­ã€çŠ¶æ€ç®¡ç†è§„èŒƒ

### 6.1 Pinia Store è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘Store æ–‡ä»¶å‘½åä½¿ç”¨ xxx.store.js
```
stores/
â”œâ”€â”€ user.store.js
â”œâ”€â”€ refund.store.js
â””â”€â”€ config.store.js
```

#### ã€æ¨èã€‘ä½¿ç”¨ Setup Store é£æ ¼
```javascript
// stores/refund.store.js
import { defineStore } from 'pinia';
import { ref, computed } from 'vue';
import { getRefundList } from '@/api/camps.api';

export const useRefundStore = defineStore('refund', () => {
  // State
  const refundList = ref([]);
  const statistics = ref({});
  const loading = ref(false);

  // Getters
  const qualifiedList = computed(() =>
    refundList.value.filter(item => item.is_qualified)
  );

  // Actions
  const fetchRefundList = async (checkinId, requiredDays) => {
    loading.value = true;
    try {
      const data = await getRefundList(checkinId, requiredDays);
      refundList.value = data.refund_list;
      statistics.value = data.statistics;
    } finally {
      loading.value = false;
    }
  };

  return {
    refundList,
    statistics,
    loading,
    qualifiedList,
    fetchRefundList
  };
});
```

---

## ä¸ƒã€API è°ƒç”¨è§„èŒƒ

### 7.1 API å°è£…è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘æ‰€æœ‰ API è°ƒç”¨å¿…é¡»å°è£…åœ¨ api/ ç›®å½•
```javascript
// api/camps.api.js
import request from './request';

/**
 * è·å–è®­ç»ƒè¥åˆ—è¡¨
 *
 * @param {string} scope - çŠ¶æ€ç­›é€‰: ongoing/over/closed
 * @returns {Promise<Object>} è®­ç»ƒè¥åˆ—è¡¨
 */
export function getCamps(scope) {
  return request.get('/camps', { params: { scope } });
}

/**
 * ç”Ÿæˆé€€æ¬¾åå•
 *
 * @param {number} checkinId - è®­ç»ƒè¥ID
 * @param {number} requiredDays - è¦æ±‚æ‰“å¡å¤©æ•°
 * @returns {Promise<Object>} é€€æ¬¾åå•å’Œç»Ÿè®¡æ•°æ®
 */
export function getRefundList(checkinId, requiredDays) {
  return request.post(`/camps/${checkinId}/refund-list`, {
    required_days: requiredDays
  });
}
```

---

### 7.2 é”™è¯¯å¤„ç†è§„èŒƒ

#### ã€å¼ºåˆ¶ã€‘ä½¿ç”¨ Axios æ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†é”™è¯¯
```javascript
// api/request.js
import axios from 'axios';
import { ElMessage } from 'element-plus';

const request = axios.create({
  baseURL: '/api',
  timeout: 30000
});

// å“åº”æ‹¦æˆªå™¨
request.interceptors.response.use(
  response => {
    const { code, message, data } = response.data;

    if (code === 200) {
      return data;
    } else {
      ElMessage.error(message || 'è¯·æ±‚å¤±è´¥');
      return Promise.reject(new Error(message));
    }
  },
  error => {
    if (error.response) {
      const { status, data } = error.response;

      // Cookie å¤±æ•ˆç‰¹æ®Šå¤„ç†
      if (status === 403 && data.message?.includes('Cookie')) {
        ElMessage.error({
          message: 'çŸ¥è¯†æ˜Ÿçƒ Cookie å·²è¿‡æœŸ,è¯·ç‚¹å‡»å³ä¸Šè§’"æ›´æ–° Cookie"æŒ‰é’®',
          duration: 5000
        });
      } else {
        ElMessage.error(data.message || 'è¯·æ±‚å¤±è´¥');
      }
    } else {
      ElMessage.error('ç½‘ç»œé”™è¯¯,è¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨');
    }

    return Promise.reject(error);
  }
);

export default request;
```

---

## å…«ã€æ ·å¼è§„èŒƒ

### 8.1 Scoped CSS

#### ã€å¼ºåˆ¶ã€‘ç»„ä»¶æ ·å¼å¿…é¡»ä½¿ç”¨ scoped
```vue
<template>
  <div class="refund-list">
    <h1 class="title">é€€æ¬¾åå•</h1>
  </div>
</template>

<style scoped>
/* âœ… æ­£ç¡®: ä½¿ç”¨ scoped,æ ·å¼ä¸ä¼šæ±¡æŸ“å…¨å±€ */
.refund-list {
  padding: 20px;
}

.title {
  font-size: 24px;
  font-weight: bold;
}
</style>

<!-- âŒ é”™è¯¯: ç¼ºå°‘ scoped,æ ·å¼ä¼šæ±¡æŸ“å…¨å±€ -->
<style>
.refund-list {
  padding: 20px;
}
</style>
```

---

### 8.2 CSS å‘½åè§„èŒƒ

#### ã€æ¨èã€‘ä½¿ç”¨ BEM å‘½åè§„èŒƒ
```vue
<template>
  <div class="statistics-card">
    <div class="statistics-card__header">
      <h3 class="statistics-card__title">æ•°æ®æ€»è§ˆ</h3>
      <button class="statistics-card__refresh-btn">åˆ·æ–°</button>
    </div>
    <div class="statistics-card__body">
      <div class="statistics-card__item statistics-card__item--highlight">
        åˆæ ¼äººæ•°: 85
      </div>
    </div>
  </div>
</template>

<style scoped>
/* Block */
.statistics-card {
  border: 1px solid #ddd;
  border-radius: 4px;
}

/* Element */
.statistics-card__header {
  padding: 10px;
  background-color: #f5f7fa;
}

.statistics-card__title {
  font-size: 18px;
}

.statistics-card__refresh-btn {
  float: right;
}

/* Modifier */
.statistics-card__item--highlight {
  color: #67c23a;
  font-weight: bold;
}
</style>
```

---

### 8.3 æ ·å¼å˜é‡

#### ã€æ¨èã€‘ä½¿ç”¨ CSS å˜é‡ç»Ÿä¸€ç®¡ç†é¢œè‰²
```css
/* styles/variables.css */
:root {
  --color-primary: #409eff;
  --color-success: #67c23a;
  --color-warning: #e6a23c;
  --color-danger: #f56c6c;
  --color-info: #909399;

  --font-size-large: 18px;
  --font-size-medium: 16px;
  --font-size-small: 14px;

  --spacing-large: 20px;
  --spacing-medium: 16px;
  --spacing-small: 12px;
}
```

**ä½¿ç”¨**:
```vue
<style scoped>
.title {
  font-size: var(--font-size-large);
  color: var(--color-primary);
  margin-bottom: var(--spacing-medium);
}
</style>
```

---

## ä¹ã€æµ‹è¯•è§„èŒƒ

### 9.1 å•å…ƒæµ‹è¯•

#### ã€æ¨èã€‘æ ¸å¿ƒç»„ä»¶å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
```javascript
// RefundList.test.js
import { mount } from '@vue/test-utils';
import { describe, it, expect, vi } from 'vitest';
import RefundList from '@/views/RefundList.vue';
import { getRefundList } from '@/api/camps.api';

// Mock API
vi.mock('@/api/camps.api');

describe('RefundList.vue', () => {
  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“ç»„ä»¶', () => {
    const wrapper = mount(RefundList);
    expect(wrapper.find('.refund-list-container').exists()).toBe(true);
  });

  it('ç‚¹å‡»"å¼€å§‹è®¡ç®—"åº”è¯¥è°ƒç”¨ API', async () => {
    getRefundList.mockResolvedValue({
      refund_list: [],
      statistics: { total_count: 99, qualified_count: 85 }
    });

    const wrapper = mount(RefundList);
    await wrapper.find('.calculate-btn').trigger('click');

    expect(getRefundList).toHaveBeenCalled();
  });

  it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºç»Ÿè®¡æ•°æ®', async () => {
    getRefundList.mockResolvedValue({
      refund_list: [],
      statistics: { total_count: 99, qualified_count: 85, qualified_rate: 85.86 }
    });

    const wrapper = mount(RefundList);
    await wrapper.find('.calculate-btn').trigger('click');
    await wrapper.vm.$nextTick();

    expect(wrapper.text()).toContain('99');
    expect(wrapper.text()).toContain('85');
  });
});
```

---

## åã€æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

### 10.1 åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–

#### ã€å¼ºåˆ¶ã€‘v-for å¿…é¡»ç»‘å®š key
```vue
<template>
  <!-- âœ… æ­£ç¡® -->
  <div v-for="item in refundList" :key="item.planet_user_id">
    {{ item.planet_nickname }}
  </div>

  <!-- âŒ é”™è¯¯: ç¼ºå°‘ key -->
  <div v-for="item in refundList">
    {{ item.planet_nickname }}
  </div>

  <!-- âŒ é”™è¯¯: ä½¿ç”¨ index ä½œä¸º key -->
  <div v-for="(item, index) in refundList" :key="index">
    {{ item.planet_nickname }}
  </div>
</template>
```

---

### 10.2 è®¡ç®—å±æ€§ç¼“å­˜

#### ã€æ¨èã€‘ä½¿ç”¨ computed æ›¿ä»£æ–¹æ³•
```vue
<script setup>
// âœ… æ­£ç¡®: ä½¿ç”¨ computed,æœ‰ç¼“å­˜
const qualifiedNames = computed(() => {
  return refundList.value
    .filter(item => item.is_qualified)
    .map(item => item.planet_nickname)
    .join('ã€');
});

// âŒ é”™è¯¯: ä½¿ç”¨æ–¹æ³•,æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—
const getQualifiedNames = () => {
  return refundList.value
    .filter(item => item.is_qualified)
    .map(item => item.planet_nickname)
    .join('ã€');
};
</script>

<template>
  <!-- âœ… æ­£ç¡® -->
  <p>{{ qualifiedNames }}</p>

  <!-- âŒ é”™è¯¯ -->
  <p>{{ getQualifiedNames() }}</p>
</template>
```

---

### 10.3 ç»„ä»¶æ‡’åŠ è½½

#### ã€æ¨èã€‘å¤§ç»„ä»¶ä½¿ç”¨æ‡’åŠ è½½
```javascript
// router/index.js
import { createRouter, createWebHistory } from 'vue-router';

const router = createRouter({
  history: createWebHistory(),
  routes: [
    {
      path: '/',
      name: 'CampList',
      // âœ… æ­£ç¡®: æ‡’åŠ è½½
      component: () => import('@/views/CampList.vue')
    },
    {
      path: '/refund/:checkin_id',
      name: 'RefundList',
      component: () => import('@/views/RefundList.vue')
    }
  ]
});

export default router;
```

---

### 10.4 å¤§æ•°æ®åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨

#### ã€æ¨èã€‘æ•°æ®é‡>100 ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
```vue
<template>
  <!-- ä½¿ç”¨ Element Plus çš„è™šæ‹Ÿæ»šåŠ¨ -->
  <el-table
    :data="refundList"
    :height="500"
    :virtual-scroll="true"
    :row-height="50"
  >
    <el-table-column prop="planet_nickname" label="æ˜Ÿçƒæ˜µç§°" />
    <el-table-column prop="checkined_days" label="æ‰“å¡å¤©æ•°" />
  </el-table>
</template>
```

---

## é™„å½•A: VSCode é…ç½®

### settings.json
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "vetur.validation.template": false,
  "vetur.validation.script": false,
  "vetur.validation.style": false,
  "[vue]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

---

## é™„å½•B: å¸¸ç”¨å·¥å…·é…ç½®

### package.json
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "vitest",
    "test:coverage": "vitest --coverage",
    "lint": "eslint src/**/*.{js,vue}",
    "lint:fix": "eslint src/**/*.{js,vue} --fix",
    "format": "prettier --write \"src/**/*.{js,vue,css}\""
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.0.0",
    "eslint": "^8.0.0",
    "eslint-plugin-vue": "^9.0.0",
    "prettier": "^3.0.0",
    "vite": "^5.0.0",
    "vitest": "^1.0.0",
    "@vue/test-utils": "^2.4.0"
  }
}
```

---

## é™„å½•C: ä»£ç å®¡æŸ¥æ¸…å•

### åŠŸèƒ½æ€§
- [ ] ç»„ä»¶æ˜¯å¦å®ç°äº†éœ€æ±‚?
- [ ] Props æ ¡éªŒæ˜¯å¦å®Œæ•´?
- [ ] äº‹ä»¶å¤„ç†æ˜¯å¦æ­£ç¡®?

### å¯è¯»æ€§
- [ ] ç»„ä»¶åæ˜¯å¦è¯­ä¹‰åŒ–?
- [ ] å˜é‡å‘½åæ˜¯å¦æ¸…æ™°?
- [ ] æ³¨é‡Šæ˜¯å¦å……åˆ†?

### æ€§èƒ½
- [ ] v-for æ˜¯å¦æœ‰ key?
- [ ] æ˜¯å¦ä½¿ç”¨äº† computed ç¼“å­˜?
- [ ] å¤§ç»„ä»¶æ˜¯å¦æ‡’åŠ è½½?

### å¯ç»´æŠ¤æ€§
- [ ] ç»„ä»¶æ˜¯å¦èŒè´£å•ä¸€?
- [ ] ä»£ç æ˜¯å¦å¯å¤ç”¨?
- [ ] æ˜¯å¦éµå¾ªè§„èŒƒ?

---

**æ–‡æ¡£ç»“æŸ**

**ç‰ˆæœ¬å†å²**:
- v1.0 (2025-10-27): åˆå§‹ç‰ˆæœ¬,å‚è€ƒ Vue å®˜æ–¹é£æ ¼æŒ‡å— + é˜¿é‡Œå·´å·´å‰ç«¯è§„çº¦

# v1 版本文档索引

> **文档原则**：单一数据源（SSOT）+ 明确引用关系，避免重复和不一致

---

## 📚 文档分类

### 1️⃣ 核心设计文档

| 文档 | 用途 | 状态 | 维护者 |
|------|------|------|--------|
| [技术方案.md](./技术方案.md) | 系统整体技术方案（117KB） | ✅ 完成 | 技术架构组 |
| [数据库设计.md](./数据库设计.md) | 16张表设计+索引优化（85KB） | ✅ 完成 | DBA团队 |
| [接口文档.md](./接口文档.md) | RESTful API接口定义（76KB） | ✅ 完成 | 后端团队 |
| [FastAuth接入方案.md](./FastAuth接入方案.md) | 知识星球OAuth方案（63KB） | ✅ 完成 | 技术架构组 |

### 2️⃣ 开发计划文档

| 文档 | 用途 | 状态 | 维护者 |
|------|------|------|--------|
| [AI辅助敏捷开发计划.md](./AI辅助敏捷开发计划.md) | Stage划分+AI提示词（42KB） | ✅ 已优化 | 技术负责人 |
| [开发前准备清单.md](./开发前准备清单.md) | 环境配置+工具安装（39KB） | ✅ 完成 | 运维团队 |
| [Stage1-支付闭环实施指南.md](./Stage1-支付闭环实施指南.md) | Stage 1详细实施计划 | ✅ 新增 | 技术架构组 |

### 3️⃣ 补充规范文档（⭐ 单一数据源）

| 文档 | 用途 | 引用场景 | 维护者 |
|------|------|---------|--------|
| [状态枚举定义.md](./状态枚举定义.md) | **所有状态枚举的唯一定义** | 前后端开发、接口对接 | 技术架构组 |
| [OAuth绑定完整时序图.md](./OAuth绑定完整时序图.md) | OAuth到支付绑定完整流程（77步） | 后端开发、问题排查 | 技术架构组 |
| [支付安全增强方案.md](./支付安全增强方案.md) | 签名验证、幂等性、Ticket机制 | 安全评审、支付开发 | 安全团队 |
| [API设计规范.md](./API设计规范.md) | RESTful规范、错误码设计 | 接口设计、前后端对接 | 技术架构组 |
| [监控指标体系.md](./监控指标体系.md) | 5层监控指标+告警策略 | 运维配置、Stage验收 | 运维团队 |
| [缓存策略与性能优化.md](./缓存策略与性能优化.md) | Redis缓存+数据库优化 | 性能优化、架构设计 | DBA+架构 |

### 4️⃣ 决策与管理文档

| 文档 | 用途 | 状态 | 维护者 |
|------|------|------|--------|
| [设计优化决策文档.md](./设计优化决策文档.md) | 33个设计问题+优化方案（35KB） | ✅ 完成 | 技术架构组 |
| [管理层决策摘要.md](./管理层决策摘要.md) | 高层决策摘要（10KB） | ✅ 完成 | 产品+技术负责人 |
| [BMAD-METHOD使用指南.md](./BMAD-METHOD使用指南.md) | 敏捷开发方法论（14KB） | ✅ 完成 | 项目管理 |

### 5️⃣ 用户故事文档

| 文档 | 对应Epic | 状态 | 维护者 |
|------|---------|------|--------|
| [user-stories/EP01-训练营管理.md](./user-stories/EP01-训练营管理.md) | 训练营CRUD | ✅ 完成 | 产品团队 |
| [user-stories/EP02-会员报名与支付.md](./user-stories/EP02-会员报名与支付.md) | 支付闭环（S2.1-S2.7） | ✅ 已重写 | 产品团队 |
| [user-stories/EP03-打卡数据同步.md](./user-stories/EP03-打卡数据同步.md) | 打卡同步 | ✅ 完成 | 产品团队 |
| [user-stories/EP04-身份匹配.md](./user-stories/EP04-身份匹配.md) | 智能匹配 | ✅ 完成 | 产品团队 |
| [user-stories/EP05-退款审核.md](./user-stories/EP05-退款审核.md) | 退款流程 | ✅ 完成 | 产品团队 |
| [user-stories/EP06-统计报表.md](./user-stories/EP06-统计报表.md) | 数据统计 | ✅ 完成 | 产品团队 |

---

## 🔗 文档引用关系

### 核心引用链

```
设计优化决策文档.md (决策源头)
    ↓
├─ 状态枚举定义.md (P0-3: bind_status统一)
├─ OAuth绑定完整时序图.md (P0-2, P1-4: 时序明确)
├─ 支付安全增强方案.md (P1-3: 安全加固)
├─ API设计规范.md (P2-4: RESTful规范)
├─ 监控指标体系.md (P2-1: 监控细化)
└─ 缓存策略与性能优化.md (P1-2: 性能优化)

EP02-会员报名与支付.md (用户故事)
    ↓ 引用
├─ OAuth绑定完整时序图.md (详细时序)
├─ 支付安全增强方案.md (安全实施)
└─ 状态枚举定义.md (状态规范)

Stage1-支付闭环实施指南.md (实施计划)
    ↓ 引用
├─ EP02-会员报名与支付.md (业务需求)
├─ OAuth绑定完整时序图.md (技术细节)
├─ 支付安全增强方案.md (安全要求)
└─ API设计规范.md (接口规范)
```

### 单一数据源（SSOT）原则

| 数据类型 | 唯一定义位置 | 其他文档 |
|---------|------------|---------|
| **状态枚举** | `状态枚举定义.md` | 其他文档引用，不重复定义 |
| **OAuth时序** | `OAuth绑定完整时序图.md` | 其他文档引用章节 |
| **支付安全** | `支付安全增强方案.md` | 其他文档引用章节 |
| **API规范** | `API设计规范.md` | 其他文档引用章节 |
| **监控指标** | `监控指标体系.md` | 其他文档引用章节 |
| **缓存策略** | `缓存策略与性能优化.md` | 其他文档引用章节 |

---

## 🚀 快速导航

### 场景1：开始新功能开发

1. 查看 [AI辅助敏捷开发计划.md](./AI辅助敏捷开发计划.md) - 了解当前Stage
2. 查看对应的实施指南（如 [Stage1-支付闭环实施指南.md](./Stage1-支付闭环实施指南.md)）
3. 参考对应的用户故事文档（如 [EP02-会员报名与支付.md](./user-stories/EP02-会员报名与支付.md)）
4. 查看技术细节文档（如 [OAuth绑定完整时序图.md](./OAuth绑定完整时序图.md)）

### 场景2：接口设计

1. 遵循 [API设计规范.md](./API设计规范.md) - RESTful规范
2. 参考 [接口文档.md](./接口文档.md) - 已有接口示例
3. 使用 [状态枚举定义.md](./状态枚举定义.md) - 状态值规范

### 场景3：数据库设计

1. 参考 [数据库设计.md](./数据库设计.md) - 16张表设计
2. 应用 [缓存策略与性能优化.md](./缓存策略与性能优化.md) - 性能优化

### 场景4：安全评审

1. 检查 [支付安全增强方案.md](./支付安全增强方案.md) - 支付安全
2. 检查 [OAuth绑定完整时序图.md](./OAuth绑定完整时序图.md) - OAuth安全

### 场景5：运维部署

1. 使用 [开发前准备清单.md](./开发前准备清单.md) - 环境配置
2. 配置 [监控指标体系.md](./监控指标体系.md) - 监控告警
3. 使用项目根目录的 `docker-compose.yml` - 本地环境

---

## 📝 文档维护规范

### 更新规则

1. **单一数据源文档**（如状态枚举定义.md）：
   - 只在源文档修改
   - 其他文档通过引用链接访问
   - 修改后需通知相关团队

2. **核心设计文档**（如技术方案.md）：
   - 重大变更需评审会审批
   - 小修改直接提交并通知
   - 保持文档版本号更新

3. **实施指南文档**（如Stage1实施指南）：
   - 开发过程中持续更新
   - 完成后锁定版本

### 文档检查清单

新增/修改文档时检查：
- [ ] 是否与现有文档重复？如是，考虑引用而非重写
- [ ] 是否需要在本README中更新索引？
- [ ] 是否需要通知相关团队？
- [ ] 文档版本号和更新时间是否更新？

---

## 🛠️ 开发环境

| 工具 | 配置文件 | 说明 |
|------|---------|------|
| Docker Compose | `/docker-compose.yml` | PostgreSQL + Redis + Adminer |
| 环境变量模板 | `/.env.example` | 复制为`.env`并配置 |
| Git忽略 | `/.gitignore` | 已包含`.env` |

**快速启动**：
```bash
# 1. 启动数据库和缓存
docker-compose up -d

# 2. 访问Adminer管理界面
open http://localhost:8081

# 3. 配置环境变量
cp .env.example .env
# 编辑.env填写实际配置
```

---

## 📊 文档统计

- **总文档数**：22个
- **总字节数**：~550KB
- **核心文档**：4个（技术方案、数据库、接口、FastAuth）
- **补充规范**：6个（状态枚举、时序图、安全、API、监控、缓存）
- **用户故事**：6个（EP01-EP06）
- **实施指南**：1个（Stage 1）

---

**索引版本**：v1.0
**最后更新**：2025-12-04
**维护者**：技术架构组

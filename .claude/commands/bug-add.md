---
description: 添加 Bug 经验到知识库，避免重复踩坑
---

# 添加 Bug 经验

记录遇到的 Bug 及其解决方案到经验库，帮助团队避免重复踩坑。

## 执行步骤

### 步骤 1: 交互式收集信息

引导用户提供以下信息：

1. **Bug 标题**（简短描述问题）
2. **Bug 分类**
   - 后端 - Java/Spring Boot
   - 前端 - Vue/Vite
   - 数据库 - PostgreSQL
   - 部署/运维 - Nginx/Docker
   - 第三方集成 - 企业微信/知识星球
   - 其他
3. **问题详细描述**
4. **错误信息/日志**
5. **问题出现的文件位置**（例如: backend/src/service/PaymentService.java:45）
6. **解决方案**
7. **根本原因分析**
8. **如何避免再次发生**
9. **相关链接**（可选）

### 步骤 2: 生成 Bug ID

格式: `BUG-{YYYYMMDD}-{序号}`

例如: `BUG-20250115-001`

### 步骤 3: 保存到经验库

更新 `docs/Bug经验库.md`：

```markdown
### BUG-20250115-001: 支付回调空指针异常

**分类**: 后端 - Java/Spring Boot
**发现日期**: 2025-01-15
**严重程度**: 🔴 高
**解决状态**: ✅ 已解决
**解决时间**: 2 小时

#### 📝 问题描述
{详细描述}

#### 🔴 错误信息
```
{错误日志}
```

#### 📁 文件位置
- {文件路径:行号}

#### 🔧 解决方案
{解决方案代码和说明}

#### 🎯 根本原因
{原因分析}

#### 💡 预防措施
{预防方法}

#### 📚 相关链接
- {链接}

#### 🏷️ 标签
{标签列表}
```

### 步骤 4: 保存 JSON 格式（可选）

创建 `docs/bugs/{bug-id}.json`：

```json
{
  "id": "BUG-20250115-001",
  "title": "支付回调空指针异常",
  "category": "backend",
  "severity": "high",
  "status": "resolved",
  "createdAt": "2025-01-15T10:30:00+08:00",
  "resolvedAt": "2025-01-15T12:30:00+08:00",
  "timeToResolve": "2h",
  "description": "...",
  "solution": "...",
  "tags": ["NullPointerException", "支付回调"]
}
```

### 步骤 5: 自动检测重复

搜索经验库中相似的 Bug，如果发现相似问题，提示用户。

## 输出示例

```
✅ Bug 经验已添加到知识库

🆔 Bug ID: BUG-20250115-001
📝 标题: 支付回调空指针异常
🏷️  分类: 后端 - Java/Spring Boot
🔴 严重程度: 高

📄 已保存到:
- docs/Bug经验库.md
- docs/bugs/BUG-20250115-001.json

💡 提示: 使用 /bug-search 搜索类似问题
```

## 触发方式

- 用户输入: `/bug-add`
- 用户说: "记录这个 Bug"、"保存这个问题的解决方案"

## 注意事项

1. 及时记录：Bug 解决后立即记录，避免遗忘细节
2. 详细描述：包含错误信息、解决步骤和根本原因
3. 隐私保护：不要在 Bug 记录中包含敏感信息

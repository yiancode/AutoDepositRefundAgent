# Bug ç»éªŒåº“

æœ¬æ–‡æ¡£è®°å½•é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ Bug åŠè§£å†³æ–¹æ¡ˆï¼Œé¿å…é‡å¤è¸©å‘ã€‚

---

## å¿«é€Ÿç´¢å¼•

| ID | åˆ†ç±» | å…³é”®è¯ | ç®€è¿° | ä¸¥é‡ç¨‹åº¦ |
|----|------|--------|------|----------|
| BUG-001 | Mermaid | C4Deployment, è¯­æ³•é”™è¯¯ | C4Deployment åœ¨ Mermaid 11.9.0 ä¸­ä¸æ”¯æŒ | ä¸­ |
| BUG-002 | Mermaid | xychart-beta, ä¸­æ–‡ | xychart-beta ä¸æ”¯æŒä¸­æ–‡å­—ç¬¦ | ä¸­ |

---

## BUG-001: C4Deployment è¯­æ³•åœ¨ Mermaid 11.9.0 ä¸­æ”¯æŒæœ‰é™

### åŸºæœ¬ä¿¡æ¯

| å­—æ®µ | å†…å®¹ |
|------|------|
| **ID** | BUG-001 |
| **åˆ†ç±»** | Mermaid / å›¾è¡¨æ¸²æŸ“ |
| **å‘ç°æ—¥æœŸ** | 2025-11-30 |
| **ä¸¥é‡ç¨‹åº¦** | ä¸­ |
| **çŠ¶æ€** | å·²è§£å†³ |

### é—®é¢˜æè¿°

åœ¨ä½¿ç”¨ Mermaid C4 æ¨¡å‹çš„ `C4Deployment` è¯­æ³•ç»˜åˆ¶éƒ¨ç½²æ¶æ„å›¾æ—¶ï¼Œæ¸²æŸ“å¤±è´¥ã€‚

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR: [Mermaid] undefined is not an object (evaluating 'r.x')
```

**é—®é¢˜ä»£ç **ï¼š
```mermaid
C4Deployment
    title éƒ¨ç½²æ¶æ„å›¾

    Deployment_Node(cdn, "CDN", "é˜¿é‡Œäº‘CDN") {
        Container(h5Static, "H5 é™æ€èµ„æº", "HTML/CSS/JS")
    }

    Deployment_Node(cloud, "äº‘æœåŠ¡å™¨", "é˜¿é‡Œäº‘ ECS") {
        Deployment_Node(nginx, "Nginx èŠ‚ç‚¹") {
            Container(gateway, "API ç½‘å…³", "Nginx 1.24")
        }
    }
```

### æ ¹å› åˆ†æ

Mermaid 11.9.0 ç‰ˆæœ¬å¯¹ C4 æ¨¡å‹çš„æ”¯æŒæœ‰é™ï¼š
- `C4Context`ã€`C4Container`ã€`C4Component` åŸºæœ¬å¯ç”¨
- `C4Deployment` è¯­æ³•è§£æå­˜åœ¨ Bugï¼Œå¯¼è‡´æ¸²æŸ“å¤±è´¥
- åµŒå¥—çš„ `Deployment_Node` å¤„ç†å¼‚å¸¸

### è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨æ ‡å‡†çš„ `flowchart` è¯­æ³•é…åˆ `subgraph` æ›¿ä»£ `C4Deployment`ï¼š

```mermaid
flowchart TB
    subgraph CDN["CDN (é˜¿é‡Œäº‘CDN)"]
        h5Static["H5 é™æ€èµ„æº<br/>HTML/CSS/JS"]
        adminStatic["ç®¡ç†åå°é™æ€èµ„æº<br/>HTML/CSS/JS"]
    end

    subgraph Cloud["äº‘æœåŠ¡å™¨ (é˜¿é‡Œäº‘ ECS)"]
        subgraph NginxNode["Nginx èŠ‚ç‚¹"]
            gateway["API ç½‘å…³<br/>Nginx 1.24"]
        end

        subgraph App1["åº”ç”¨èŠ‚ç‚¹ 1"]
            api1["API æœåŠ¡<br/>Spring Boot"]
        end
    end

    CDN -->|HTTPS| gateway
    gateway -->|HTTP| api1
```

### æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨åŸºç¡€è¯­æ³•**ï¼š`flowchart` æ¯” C4 æ‰©å±•è¯­æ³•å…¼å®¹æ€§æ›´å¥½
2. **ä½¿ç”¨ subgraph è¡¨ç¤ºå±‚çº§**ï¼šå¯ä»¥æ¸…æ™°å±•ç¤ºéƒ¨ç½²æ‹“æ‰‘
3. **æ·»åŠ æ ·å¼è¯´æ˜**ï¼šåœ¨ subgraph æ ‡ç­¾ä¸­åŒ…å«æŠ€æœ¯æ ˆä¿¡æ¯
4. **æµ‹è¯•æ¸²æŸ“**ï¼šåœ¨æäº¤å‰å…ˆåœ¨æœ¬åœ°é¢„è§ˆ Mermaid å›¾è¡¨

### ç›¸å…³æ–‡ä»¶

- `docs/v1.1/diagrams/æ¶æ„è®¾è®¡å›¾.md` - ç¬¬ 6.1 èŠ‚

---

## BUG-002: xychart-beta ä¸æ”¯æŒä¸­æ–‡å­—ç¬¦

### åŸºæœ¬ä¿¡æ¯

| å­—æ®µ | å†…å®¹ |
|------|------|
| **ID** | BUG-002 |
| **åˆ†ç±»** | Mermaid / å›¾è¡¨æ¸²æŸ“ |
| **å‘ç°æ—¥æœŸ** | 2025-11-30 |
| **ä¸¥é‡ç¨‹åº¦** | ä¸­ |
| **çŠ¶æ€** | å·²è§£å†³ |

### é—®é¢˜æè¿°

åœ¨ä½¿ç”¨ Mermaid çš„ `xychart-beta` è¯­æ³•ç»˜åˆ¶æƒ…ç»ªæ›²çº¿å›¾æ—¶ï¼Œä¸­æ–‡å­—ç¬¦å¯¼è‡´è§£æå¤±è´¥ã€‚

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR: [Mermaid] Lexical error on line 3. Unrecognized text.
..."ä¼šå‘˜æƒ…ç»ªæ›²çº¿" x-axis [å‘ç°, æµè§ˆ, å¡«è¡¨, æ”¯ä»˜, è¿›ç¾¤,
```

**é—®é¢˜ä»£ç **ï¼š
```mermaid
xychart-beta
    title "ä¼šå‘˜æƒ…ç»ªæ›²çº¿"
    x-axis [å‘ç°, æµè§ˆ, å¡«è¡¨, æ”¯ä»˜, è¿›ç¾¤, æ‰“å¡, åšæŒ, ç­‰å¾…, æ”¶åˆ°é€€æ¬¾]
    y-axis "æƒ…ç»ªè¯„åˆ†" 1 --> 5
    line [5, 4, 3, 4, 5, 4, 3, 2, 5]
```

### æ ¹å› åˆ†æ

Mermaid 11.9.0 çš„ `xychart-beta` åŠŸèƒ½å­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼š
- x-axis æ ‡ç­¾ä¸æ”¯æŒä¸­æ–‡å­—ç¬¦
- title ä¸­çš„ä¸­æ–‡å¯èƒ½å¯¼è‡´è§£æå¼‚å¸¸
- è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼ˆbetaï¼‰ï¼Œç¨³å®šæ€§ä¸è¶³

### è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨ **Markdown è¡¨æ ¼ + ASCII è‰ºæœ¯** æ›¿ä»£ xychart-betaï¼š

```markdown
| é˜¶æ®µ | å‘ç° | æµè§ˆ | å¡«è¡¨ | æ”¯ä»˜ | è¿›ç¾¤ | æ‰“å¡ | åšæŒ | ç­‰å¾… | æ”¶åˆ°é€€æ¬¾ |
|------|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:--------:|
| æƒ…ç»ª | ğŸ˜Š | ğŸ™‚ | ğŸ˜ | ğŸ™‚ | ğŸ˜Š | ğŸ™‚ | ğŸ˜ | ğŸ˜Ÿ | ğŸ˜Š |
| è¯„åˆ† | 5 | 4 | 3 | 4 | 5 | 4 | 3 | 2 | 5 |

æƒ…ç»ªæ›²çº¿ç¤ºæ„:

5 â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—
  â”‚                   â”‚                                   â”‚
4 â”‚     â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—                   â”‚
  â”‚    â•±              â”‚    â•²         â•± â•²                  â”‚
3 â”‚   â—               â”‚     â•²       â—   â•²                 â”‚
  â”‚                   â”‚      â•²           â•²                â”‚
2 â”‚                   â”‚       â•²           â—               â”‚
  â”‚                   â”‚                                   â”‚
1 â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  å‘ç° æµè§ˆ å¡«è¡¨ æ”¯ä»˜ è¿›ç¾¤ æ‰“å¡ åšæŒ ç­‰å¾… é€€æ¬¾
```

### æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| xychart-beta | è‡ªåŠ¨æ¸²æŸ“ç¾è§‚ | ä¸æ”¯æŒä¸­æ–‡ï¼ŒBeta ä¸ç¨³å®š |
| Markdown è¡¨æ ¼ | å…¼å®¹æ€§100%ï¼Œè¯­ä¹‰æ¸…æ™° | æ— æ³•å±•ç¤ºæ›²çº¿è¶‹åŠ¿ |
| è¡¨æ ¼ + ASCII | å…¼å®¹æ€§å¥½ï¼Œå¯å±•ç¤ºè¶‹åŠ¿ | éœ€è¦æ‰‹å·¥ç»˜åˆ¶ |
| å¤–éƒ¨å›¾ç‰‡ | å®Œç¾å±•ç¤º | éœ€è¦é¢å¤–ç»´æŠ¤å›¾ç‰‡ |

### æœ€ä½³å®è·µ

1. **é¿å… beta åŠŸèƒ½**ï¼šç”Ÿäº§æ–‡æ¡£ä¸ä½¿ç”¨å®éªŒæ€§è¯­æ³•
2. **è¡¨æ ¼ä¼˜å…ˆ**ï¼šè¡¨æ ¼æ—¢æ¸…æ™°åˆå…¼å®¹æ‰€æœ‰ Markdown æ¸²æŸ“å™¨
3. **Emoji å¢å¼º**ï¼šä½¿ç”¨è¡¨æƒ…ç¬¦å·ç›´è§‚è¡¨è¾¾æƒ…ç»ªçŠ¶æ€
4. **ASCII è¡¥å……**ï¼šéœ€è¦å±•ç¤ºè¶‹åŠ¿æ—¶å¯ç”¨ ASCII è‰ºæœ¯

### ç›¸å…³æ–‡ä»¶

- `docs/v1.1/diagrams/ç”¨æˆ·æ—…ç¨‹å›¾.md` - ç¬¬ 1.3 èŠ‚

---

## é™„å½•ï¼šMermaid å…¼å®¹æ€§é€ŸæŸ¥

### æ¨èä½¿ç”¨çš„å›¾è¡¨ç±»å‹

| ç±»å‹ | è¯­æ³• | ä¸­æ–‡æ”¯æŒ | ç¨³å®šæ€§ |
|------|------|:--------:|:------:|
| æµç¨‹å›¾ | `flowchart` | âœ… | â­â­â­ |
| æ—¶åºå›¾ | `sequenceDiagram` | âœ… | â­â­â­ |
| ç±»å›¾ | `classDiagram` | âœ… | â­â­â­ |
| çŠ¶æ€å›¾ | `stateDiagram-v2` | âœ… | â­â­â­ |
| ç”˜ç‰¹å›¾ | `gantt` | âœ… | â­â­â­ |
| é¥¼å›¾ | `pie` | âœ… | â­â­â­ |
| ç”¨æˆ·æ—…ç¨‹ | `journey` | âœ… | â­â­ |
| C4 ä¸Šä¸‹æ–‡ | `C4Context` | âœ… | â­â­ |
| C4 å®¹å™¨ | `C4Container` | âœ… | â­â­ |
| C4 ç»„ä»¶ | `C4Component` | âœ… | â­â­ |

### è°¨æ…ä½¿ç”¨çš„å›¾è¡¨ç±»å‹

| ç±»å‹ | è¯­æ³• | é—®é¢˜ |
|------|------|------|
| C4 éƒ¨ç½²å›¾ | `C4Deployment` | åµŒå¥—èŠ‚ç‚¹è§£æå¤±è´¥ |
| XY å›¾è¡¨ | `xychart-beta` | ä¸æ”¯æŒä¸­æ–‡ |
| Mindmap | `mindmap` | å¤æ‚å±‚çº§å¯èƒ½å¤±è´¥ |
| Timeline | `timeline` | Beta åŠŸèƒ½ |

---

*æœ€åæ›´æ–°ï¼š2025-11-30*
